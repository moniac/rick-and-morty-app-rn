{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Mohammed\\\\Documents\\\\mohammedmulazada\\\\reactnative\\\\rick-and-morty-app-rn\\\\screens\\\\HomeScreen.js\";\nimport * as WebBrowser from 'expo-web-browser';\nimport React, { useEffect, useState } from 'react';\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { TextInput } from 'react-native-paper';\nimport { getCharacter } from \"../hooks/useApi\";\nimport { Avatar, Button, Card, Title, Paragraph } from 'react-native-paper';\nexport default function HomeScreen(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      characters = _useState2[0],\n      setCharacters = _useState2[1];\n\n  var _useState3 = useState(1),\n      _useState4 = _slicedToArray(_useState3, 2),\n      nextPage = _useState4[0],\n      setNextPage = _useState4[1];\n\n  var _useState5 = useState(undefined),\n      _useState6 = _slicedToArray(_useState5, 2),\n      pageLimit = _useState6[0],\n      setPageLimit = _useState6[1];\n\n  var navigation = props.navigation;\n\n  var _useState7 = useState(''),\n      _useState8 = _slicedToArray(_useState7, 2),\n      search = _useState8[0],\n      setSearch = _useState8[1];\n\n  useEffect(function () {\n    console.log(search);\n\n    if (nextPage > 1) {\n      setNextPage(1);\n    }\n\n    function getCharacterBySearch() {\n      var response;\n      return _regeneratorRuntime.async(function getCharacterBySearch$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(getCharacter({\n                name: search\n              }));\n\n            case 2:\n              response = _context.sent;\n              setCharacters(response.results);\n              console.log(response.results);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    getCharacterBySearch();\n  }, [search]);\n  useEffect(function () {\n    function getTest() {\n      var response;\n      return _regeneratorRuntime.async(function getTest$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(getCharacter({\n                page: 1\n              }));\n\n            case 2:\n              response = _context2.sent;\n              setCharacters(function (prevValues) {\n                return response.results;\n              });\n              setPageLimit(response.info.pages);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    getTest();\n  }, []);\n  useEffect(function () {\n    if (nextPage > pageLimit) {\n      return;\n    }\n\n    function getNext() {\n      var data, response, merged;\n      return _regeneratorRuntime.async(function getNext$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(fetch('https://rickandmortyapi.com/api/character/?page=' + nextPage));\n\n            case 2:\n              data = _context3.sent;\n              _context3.next = 5;\n              return _regeneratorRuntime.awrap(data.json());\n\n            case 5:\n              response = _context3.sent;\n              merged = [].concat(_toConsumableArray(characters), _toConsumableArray(response.results));\n              setCharacters(merged);\n\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    getNext();\n  }, [nextPage]);\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 3\n    }\n  }, React.createElement(FlatList, {\n    centerContent: true,\n    numColumns: 1,\n    data: characters,\n    ListHeaderComponent: React.createElement(View, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 6\n      }\n    }, React.createElement(TextInput, {\n      style: {\n        width: '100%',\n        flex: 1\n      },\n      onChangeText: function onChangeText(event) {\n        return setSearch(event.trim());\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    })),\n    ListHeaderComponentStyle: {\n      width: '100%'\n    },\n    contentContainerStyle: {\n      justifyContent: 'center',\n      alignItems: 'center',\n      alignSelf: 'center',\n      width: '100%'\n    },\n    style: {\n      width: '100%'\n    },\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 6\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 7\n        }\n      }, React.createElement(Card.Cover, {\n        style: {\n          width: 300,\n          height: 300,\n          paddingTop: 12\n        },\n        source: {\n          uri: item.image\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 8\n        }\n      })), React.createElement(Card.Content, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 7\n        }\n      }, React.createElement(Card.Title, {\n        title: item.name,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 8\n        }\n      }), React.createElement(Card.Actions, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 8\n        }\n      }, React.createElement(Button, {\n        onPress: function onPress() {\n          return navigation.navigate('CharacterDetail', {\n            characterId: item.id,\n            title: item.name\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 9\n        }\n      }, \"Read More\"))));\n    },\n    keyExtractor: function keyExtractor(char) {\n      return char.id + \" - \" + char.name;\n    },\n    onEndReached: function onEndReached() {\n      if (nextPage) {\n        console.log('times');\n        console.log(nextPage + 1);\n        setNextPage(function (v) {\n          return parseInt(v + 1, 10);\n        });\n      }\n    },\n    onEndReachedThreshold: 0.1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 4\n    }\n  }));\n}\nHomeScreen.navigationOptions = {\n  header: null\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: '100%'\n  }\n});","map":{"version":3,"sources":["C:/Users/Mohammed/Documents/mohammedmulazada/reactnative/rick-and-morty-app-rn/screens/HomeScreen.js"],"names":["WebBrowser","React","useEffect","useState","TextInput","getCharacter","Avatar","Button","Card","Title","Paragraph","HomeScreen","props","characters","setCharacters","nextPage","setNextPage","undefined","pageLimit","setPageLimit","navigation","search","setSearch","console","log","getCharacterBySearch","name","response","results","getTest","page","prevValues","info","pages","getNext","fetch","data","json","merged","styles","container","width","flex","event","trim","justifyContent","alignItems","alignSelf","item","height","paddingTop","uri","image","navigate","characterId","id","title","char","v","parseInt","navigationOptions","header","StyleSheet","create"],"mappings":"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","sourcesContent":["import * as WebBrowser from 'expo-web-browser';\nimport React, { useEffect, useState } from 'react';\nimport {\n\tImage,\n\tStyleSheet,\n\tView,\n\tFlatList,\n\t// Button\n} from 'react-native';\nimport { TextInput } from 'react-native-paper';\nimport { getCharacter } from '../hooks/useApi';\nimport { Avatar, Button, Card, Title, Paragraph } from 'react-native-paper';\n\nexport default function HomeScreen(props) {\n\tconst [characters, setCharacters] = useState([]);\n\tconst [nextPage, setNextPage] = useState(1);\n\tconst [pageLimit, setPageLimit] = useState(undefined);\n\tconst { navigation } = props;\n\n\tconst [search, setSearch] = useState('');\n\n\tuseEffect(() => {\n\t\tconsole.log(search);\n\n\t\tif (nextPage > 1) {\n\t\t\tsetNextPage(1);\n\t\t}\n\n\t\tasync function getCharacterBySearch() {\n\t\t\tconst response = await getCharacter({ name: search });\n\t\t\tsetCharacters(response.results);\n\t\t\tconsole.log(response.results);\n\t\t}\n\n\t\tgetCharacterBySearch();\n\t}, [search]);\n\n\tuseEffect(() => {\n\t\tasync function getTest() {\n\t\t\tconst response = await getCharacter({ page: 1 });\n\t\t\tsetCharacters((prevValues) => response.results);\n\t\t\tsetPageLimit(response.info.pages);\n\t\t}\n\t\tgetTest();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (nextPage > pageLimit) {\n\t\t\treturn;\n\t\t}\n\n\t\tasync function getNext() {\n\t\t\tconst data = await fetch(\n\t\t\t\t'https://rickandmortyapi.com/api/character/?page=' + nextPage,\n\t\t\t);\n\t\t\tconst response = await data.json();\n\n\t\t\tconst merged = [...characters, ...response.results];\n\t\t\t// function removeDuplicates(array, key) {\n\t\t\t// \tlet lookup = new Set();\n\t\t\t// \treturn array.filter(\n\t\t\t// \t\t(obj) => !lookup.has(obj[key]) && lookup.add(obj[key]),\n\t\t\t// \t);\n\t\t\t// }\n\t\t\t// const filtered = removeDuplicates(merged, 'id');\n\n\t\t\tsetCharacters(merged);\n\t\t}\n\n\t\tgetNext();\n\t}, [nextPage]);\n\n\treturn (\n\t\t<View style={styles.container}>\n\t\t\t<FlatList\n\t\t\t\tcenterContent={true}\n\t\t\t\tnumColumns={1}\n\t\t\t\tdata={characters}\n\t\t\t\tListHeaderComponent={\n\t\t\t\t\t<View style={{ width: '100%' }}>\n\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\tstyle={{ width: '100%', flex: 1 }}\n\t\t\t\t\t\t\tonChangeText={(event) => setSearch(event.trim())}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t}\n\t\t\t\tListHeaderComponentStyle={{ width: '100%' }}\n\t\t\t\tcontentContainerStyle={{\n\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\talignItems: 'center',\n\t\t\t\t\talignSelf: 'center',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t}}\n\t\t\t\tstyle={{ width: '100%' }}\n\t\t\t\trenderItem={({ item }) => (\n\t\t\t\t\t<Card>\n\t\t\t\t\t\t<View>\n\t\t\t\t\t\t\t<Card.Cover\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\twidth: 300,\n\t\t\t\t\t\t\t\t\theight: 300,\n\t\t\t\t\t\t\t\t\tpaddingTop: 12,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tsource={{ uri: item.image }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t\t<Card.Content>\n\t\t\t\t\t\t\t<Card.Title title={item.name} />\n\t\t\t\t\t\t\t<Card.Actions>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tonPress={() =>\n\t\t\t\t\t\t\t\t\t\tnavigation.navigate('CharacterDetail', {\n\t\t\t\t\t\t\t\t\t\t\tcharacterId: item.id,\n\t\t\t\t\t\t\t\t\t\t\ttitle: item.name,\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tRead More\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Card.Actions>\n\t\t\t\t\t\t</Card.Content>\n\t\t\t\t\t</Card>\n\t\t\t\t)}\n\t\t\t\tkeyExtractor={(char) => `${char.id} - ${char.name}`}\n\t\t\t\tonEndReached={() => {\n\t\t\t\t\tif (nextPage) {\n\t\t\t\t\t\tconsole.log('times');\n\t\t\t\t\t\tconsole.log(nextPage + 1);\n\t\t\t\t\t\tsetNextPage((v) => parseInt(v + 1, 10));\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t\tonEndReachedThreshold={0.1}\n\t\t\t/>\n\t\t\t{/* <View style={styles.getStartedContainer}>\n\t\t\t\t\t{characters.length &&\n\t\t\t\t\t\tcharacters.map((char) => {\n\t\t\t\t\t\t\treturn <p>{char.name}</p>;\n\t\t\t\t\t\t})}\n\t\t\t\t</View> */}\n\t\t</View>\n\t);\n}\n\nHomeScreen.navigationOptions = {\n\theader: null,\n};\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tflex: 1,\n\t\twidth: '100%',\n\t},\n});\n"]},"metadata":{},"sourceType":"module"}